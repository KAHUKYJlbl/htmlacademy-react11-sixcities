(self.webpackChunkproject=self.webpackChunkproject||[]).push([[902],{4902:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return U}});var s=r(3433),n=r(2791),i=r(7689),a=r(6972),o=r(2182),c=r(184),u=6;function l(e){var t=e.offer;return(0,c.jsx)("div",{className:"property__gallery-container container",children:(0,c.jsx)("div",{className:"property__gallery",children:t.images.slice(0,u).map((function(e,r){return(0,c.jsx)("div",{className:"property__image-wrapper",children:(0,c.jsx)("img",{className:"property__image",src:e,alt:"Photo ".concat(t.type)})},e.slice(r))}))})})}var d=r(4904),h=r(1694),f=r.n(h),m=r(1572),p=r(1408),_=r(4942),v=r(1413),g=r(9439),y=r(5059),x=r(6916),w=r(6501),j=function(e){return(0,s.Z)(e[w.Lo.Comments].comments).sort((function(e,t){return Date.parse(t.date)-Date.parse(e.date)})).slice(0,10)},$=((0,x.P1)([function(e){return e[w.Lo.Comments].commentsLoadingStatus}],(function(e){return{isLoading:[w.iF.Idle,w.iF.Pending].includes(e),isSuccess:e===w.iF.Success}})),(0,x.P1)((function(e){return e[w.Lo.Comments].commentPostingStatus}),(function(e){return{isLoading:e===w.iF.Pending,isSuccess:e===w.iF.Success}}))),N=r(1029),M=r(9085),S={1:"terribly",2:"badly",3:"not bad",4:"good",5:"perfect"};function b(e){var t=e.currentRating,r=e.starRating,s=e.changeHandler;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("input",{className:"form__rating-input visually-hidden",name:"rating",value:r,id:"".concat(r,"-stars"),type:"radio",checked:t===r,onChange:s}),(0,c.jsx)("label",{htmlFor:"".concat(r,"-stars"),className:"reviews__rating-label form__rating-label",title:S[r],children:(0,c.jsx)("svg",{className:"form__star-image",width:"37",height:"33",children:(0,c.jsx)("use",{xlinkHref:"#icon-star"})})})]})}function D(e){var t=e.offerId,r=(0,o.C)($),s=(0,a.T)(),i=(0,n.useState)({rating:"",review:""}),u=(0,g.Z)(i,2),l=u[0],d=u[1];(0,n.useEffect)((function(){r.isSuccess&&d({rating:"",review:""})}),[r]);var h=function(e){d((0,v.Z)((0,v.Z)({},l),{},(0,_.Z)({},e.target.name,e.target.value)))},f=Object.keys(S).reverse();return(0,c.jsx)("form",{className:"reviews__form form",action:"#",method:"post",onSubmit:function(e){e.preventDefault(),l.review.length>=50&&l.review.length<=300&&l.rating.length>0?s((0,y.$)({id:t,comment:l.review,rating:+l.rating})):M.Am.error("Please type 50 to 300 letters review and choose rating.")},children:(0,c.jsxs)("fieldset",{disabled:r.isLoading,children:[(0,c.jsx)("label",{className:"reviews__label form__label",htmlFor:"review",children:"Your review"}),(0,c.jsx)("div",{className:"reviews__rating-form form__rating",children:f.map((function(e){return(0,c.jsx)(b,{currentRating:l.rating,starRating:e,changeHandler:h},e)}))}),(0,c.jsx)("textarea",{className:"reviews__textarea form__textarea",id:"review",name:"review",placeholder:"Tell how was your stay, what you like and what can be improved",value:l.review,onChange:h}),(0,c.jsxs)("div",{className:"reviews__button-wrapper",children:[(0,c.jsxs)("p",{className:"reviews__help",children:["To submit review please make sure to set"," ",(0,c.jsx)("span",{className:"reviews__star",children:"rating"}),"and describe your stay with at least"," ",(0,c.jsx)("b",{className:"reviews__text-amount",children:"50 characters"}),"."]}),(0,c.jsx)("button",{className:"reviews__submit form__submit button",type:"submit",children:r.isLoading?(0,c.jsx)(N.Z,{spinnerType:"button"}):"Submit"})]})]})})}var C=r(8585),F=r(7892),O=r.n(F);function L(e){var t=e.comment;return(0,c.jsxs)("li",{className:"reviews__item",children:[(0,c.jsxs)("div",{className:"reviews__user user",children:[(0,c.jsx)("div",{className:"reviews__avatar-wrapper user__avatar-wrapper",children:(0,c.jsx)("img",{className:"reviews__avatar user__avatar",src:t.user.avatarUrl,width:"54",height:"54",alt:"Reviews avatar"})}),(0,c.jsx)("span",{className:"reviews__user-name",children:t.user.name})]}),(0,c.jsxs)("div",{className:"reviews__info",children:[(0,c.jsx)(C.Z,{rating:t.rating,starRatingType:"review"}),(0,c.jsx)("p",{className:"reviews__text",children:t.comment}),(0,c.jsx)("time",{className:"reviews__time",dateTime:O()(t.date).format("YYYY-MM-DDThh:mm:ssZ"),children:O()(t.date).format("MMMM YYYY")})]})]})}var T=r(5885);function Y(e){var t=e.isPremium,r=void 0===t||t,s=e.offer,n=(0,o.C)(j),i=(0,o.C)(T.TA);return(0,c.jsx)("div",{className:"property__container container",children:(0,c.jsxs)("div",{className:"property__wrapper",children:[r&&(0,c.jsx)(m.Z,{title:"Premium",badgeClasses:["property__mark"]}),(0,c.jsxs)("div",{className:"property__name-wrapper",children:[(0,c.jsx)("h1",{className:"property__name",children:s.title}),(0,c.jsx)(p.Z,{isFavorite:s.isFavorite,buttonType:"room",offerId:s.id})]}),(0,c.jsx)(C.Z,{rating:s.rating,starRatingType:"room"}),(0,c.jsxs)("ul",{className:"property__features",children:[(0,c.jsx)("li",{className:"property__feature property__feature--entire",children:s.type}),(0,c.jsx)("li",{className:"property__feature property__feature--bedrooms",children:"".concat(s.bedrooms," Bedrooms")}),(0,c.jsxs)("li",{className:"property__feature property__feature--adults",children:["Max ",s.maxAdults," adults"]})]}),(0,c.jsxs)("div",{className:"property__price",children:[(0,c.jsx)("b",{className:"property__price-value",children:"\u20ac".concat(s.price)}),(0,c.jsx)("span",{className:"property__price-text",children:"\xa0night"})]}),(0,c.jsxs)("div",{className:"property__inside",children:[(0,c.jsx)("h2",{className:"property__inside-title",children:"What's inside"}),(0,c.jsx)("ul",{className:"property__inside-list",children:s.goods.map((function(e){return(0,c.jsx)("li",{className:"property__inside-item",children:e},e)}))})]}),(0,c.jsxs)("div",{className:"property__host",children:[(0,c.jsx)("h2",{className:"property__host-title",children:"Meet the host"}),(0,c.jsxs)("div",{className:"property__host-user user",children:[(0,c.jsx)("div",{className:f()("user__avatar-wrapper property__avatar-wrapper",s.host.isPro&&"property__avatar-wrapper--pro"),children:(0,c.jsx)("img",{className:"property__avatar user__avatar",src:s.host.avatarUrl,width:"74",height:"74",alt:"Host avatar"})}),(0,c.jsx)("span",{className:"property__user-name",children:s.host.name}),(0,c.jsx)("span",{className:"property__user-status",children:s.host.isPro?"Pro":"Amateur"})]}),(0,c.jsx)("div",{className:"property__description",children:s.description.split(". ").map((function(e){return(0,c.jsx)("p",{className:"property__text",children:e},e.slice(3,6))}))})]}),(0,c.jsxs)("section",{className:"property__reviews reviews",children:[(0,c.jsxs)("h2",{className:"reviews__title",children:["Reviews \xb7 ",(0,c.jsx)("span",{className:"reviews__amount",children:n.length})]}),(0,c.jsx)("ul",{className:"reviews__list",children:n.map((function(e){return(0,c.jsx)(L,{comment:e},e.id)}))}),i.auth&&(0,c.jsx)(D,{offerId:s.id.toString()})]})]})})}var Z=r(5306);function k(e){var t=e.offers;return(0,c.jsxs)("section",{className:"near-places places",children:[(0,c.jsx)("h2",{className:"near-places__title",children:"Other places in the neighbourhood"}),(0,c.jsx)(Z.Z,{offers:t,placeCardType:"nearby",placeCardContainerClasses:["near-places__list","places__list"]})]})}var H=r(7703),P=r(2529),I=r(169),R=function(e){return e[w.Lo.Room].nearbyOffers},A=function(e){return e[w.Lo.Room].offer},W=(0,x.P1)((function(e){return e[w.Lo.Room].offerLoadingStatus}),(function(e){return{isLoading:[w.iF.Idle,w.iF.Pending].includes(e),isSuccess:e===w.iF.Success,isFailed:e===w.iF.Failed}}));(0,x.P1)((function(e){return e[w.Lo.Room].nearbyLoadingStatus}),(function(e){return{isLoading:[w.iF.Idle,w.iF.Pending].includes(e),isSuccess:e===w.iF.Success,isFailed:e===w.iF.Failed}}));function U(){var e=(0,i.UO)().id,t=(0,a.T)(),r=(0,o.C)(A),u=(0,o.C)(R),h=(0,o.C)(W);return(0,n.useEffect)((function(){t((0,I.G)(e)),t((0,y.t)(e)),t((0,I.k)(e))}),[t,e]),h.isLoading?(0,c.jsx)(N.Z,{spinnerType:"page"}):h.isFailed||!r?(0,c.jsx)(P.Z,{type:"room",arg:e}):(0,c.jsx)(d.Z,{isHeaderNav:!0,children:(0,c.jsxs)("main",{className:"page__main page__main--property",children:[(0,c.jsxs)("section",{className:"property",children:[(0,c.jsx)(l,{offer:r}),(0,c.jsx)(Y,{offer:r}),(0,c.jsx)(H.Z,{mapClasses:["property__map"],offers:[r].concat((0,s.Z)(u)),hoveredOfferId:r.id})]}),(0,c.jsx)("div",{className:"container",children:(0,c.jsx)(k,{offers:u})})]})})}},7892:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,r=36e5,s="millisecond",n="second",i="minute",a="hour",o="day",c="week",u="month",l="quarter",d="year",h="date",f="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},v=function(e,t,r){var s=String(e);return!s||s.length>=t?e:""+Array(t+1-s.length).join(r)+e},g={s:v,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),s=Math.floor(r/60),n=r%60;return(t<=0?"+":"-")+v(s,2,"0")+":"+v(n,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var s=12*(r.year()-t.year())+(r.month()-t.month()),n=t.clone().add(s,u),i=r-n<0,a=t.clone().add(s+(i?-1:1),u);return+(-(s+(r-n)/(i?n-a:a-n))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:d,w:c,d:o,D:h,h:a,m:i,s:n,ms:s,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",x={};x[y]=_;var w=function(e){return e instanceof M},j=function e(t,r,s){var n;if(!t)return y;if("string"==typeof t){var i=t.toLowerCase();x[i]&&(n=i),r&&(x[i]=r,n=i);var a=t.split("-");if(!n&&a.length>1)return e(a[0])}else{var o=t.name;x[o]=t,n=o}return!s&&n&&(y=n),n||!s&&y},$=function(e,t){if(w(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new M(r)},N=g;N.l=j,N.i=w,N.w=function(e,t){return $(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var M=function(){function _(e){this.$L=j(e.locale,null,!0),this.parse(e)}var v=_.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(N.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var s=t.match(m);if(s){var n=s[2]-1||0,i=(s[7]||"0").substring(0,3);return r?new Date(Date.UTC(s[1],n,s[3]||1,s[4]||0,s[5]||0,s[6]||0,i)):new Date(s[1],n,s[3]||1,s[4]||0,s[5]||0,s[6]||0,i)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return N},v.isValid=function(){return!(this.$d.toString()===f)},v.isSame=function(e,t){var r=$(e);return this.startOf(t)<=r&&r<=this.endOf(t)},v.isAfter=function(e,t){return $(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<$(e)},v.$g=function(e,t,r){return N.u(e)?this[t]:this.set(r,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var r=this,s=!!N.u(t)||t,l=N.p(e),f=function(e,t){var n=N.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return s?n:n.endOf(o)},m=function(e,t){return N.w(r.toDate()[e].apply(r.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},p=this.$W,_=this.$M,v=this.$D,g="set"+(this.$u?"UTC":"");switch(l){case d:return s?f(1,0):f(31,11);case u:return s?f(1,_):f(0,_+1);case c:var y=this.$locale().weekStart||0,x=(p<y?p+7:p)-y;return f(s?v-x:v+(6-x),_);case o:case h:return m(g+"Hours",0);case a:return m(g+"Minutes",1);case i:return m(g+"Seconds",2);case n:return m(g+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var r,c=N.p(e),l="set"+(this.$u?"UTC":""),f=(r={},r[o]=l+"Date",r[h]=l+"Date",r[u]=l+"Month",r[d]=l+"FullYear",r[a]=l+"Hours",r[i]=l+"Minutes",r[n]=l+"Seconds",r[s]=l+"Milliseconds",r)[c],m=c===o?this.$D+(t-this.$W):t;if(c===u||c===d){var p=this.clone().set(h,1);p.$d[f](m),p.init(),this.$d=p.set(h,Math.min(this.$D,p.daysInMonth())).$d}else f&&this.$d[f](m);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[N.p(e)]()},v.add=function(s,l){var h,f=this;s=Number(s);var m=N.p(l),p=function(e){var t=$(f);return N.w(t.date(t.date()+Math.round(e*s)),f)};if(m===u)return this.set(u,this.$M+s);if(m===d)return this.set(d,this.$y+s);if(m===o)return p(1);if(m===c)return p(7);var _=(h={},h[i]=t,h[a]=r,h[n]=e,h)[m]||1,v=this.$d.getTime()+s*_;return N.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||f;var s=e||"YYYY-MM-DDTHH:mm:ssZ",n=N.z(this),i=this.$H,a=this.$m,o=this.$M,c=r.weekdays,u=r.months,l=function(e,r,n,i){return e&&(e[r]||e(t,s))||n[r].slice(0,i)},d=function(e){return N.s(i%12||12,e,"0")},h=r.meridiem||function(e,t,r){var s=e<12?"AM":"PM";return r?s.toLowerCase():s},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:N.s(o+1,2,"0"),MMM:l(r.monthsShort,o,u,3),MMMM:l(u,o),D:this.$D,DD:N.s(this.$D,2,"0"),d:String(this.$W),dd:l(r.weekdaysMin,this.$W,c,2),ddd:l(r.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(i),HH:N.s(i,2,"0"),h:d(1),hh:d(2),a:h(i,a,!0),A:h(i,a,!1),m:String(a),mm:N.s(a,2,"0"),s:String(this.$s),ss:N.s(this.$s,2,"0"),SSS:N.s(this.$ms,3,"0"),Z:n};return s.replace(p,(function(e,t){return t||m[e]||n.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(s,h,f){var m,p=N.p(h),_=$(s),v=(_.utcOffset()-this.utcOffset())*t,g=this-_,y=N.m(this,_);return y=(m={},m[d]=y/12,m[u]=y,m[l]=y/3,m[c]=(g-v)/6048e5,m[o]=(g-v)/864e5,m[a]=g/r,m[i]=g/t,m[n]=g/e,m)[p]||g,f?y:N.a(y)},v.daysInMonth=function(){return this.endOf(u).$D},v.$locale=function(){return x[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),s=j(e,t,!0);return s&&(r.$L=s),r},v.clone=function(){return N.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},_}(),S=M.prototype;return $.prototype=S,[["$ms",s],["$s",n],["$m",i],["$H",a],["$W",o],["$M",u],["$y",d],["$D",h]].forEach((function(e){S[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),$.extend=function(e,t){return e.$i||(e(t,M,$),e.$i=!0),$},$.locale=j,$.isDayjs=w,$.unix=function(e){return $(1e3*e)},$.en=x[y],$.Ls=x,$.p={},$}()}}]);
//# sourceMappingURL=902.b83b3aca.chunk.js.map